
# included from application Makefiles;
# default definitions which application Makefiles can override

NDIMS=1
include $(FINESS)/lib/Makefile.defs
# library this file is in
LIB1D = $(FINESS)/lib/1d
LIB1D_INCLUDE = -I$(LIB1D) $(TOPLIB_INCLUDE)
# inheriting libraries are expected to override this
INCLUDE_LIBS = $(LIB1D_INCLUDE)

# added to by applications
#
# (recall that make expands variables names when used, not when defined,
# so it is okay that these are defined later.)
#
# applications are expected to override the definitions of ALL_*
# in order to add additional files to the COMMON_* files.
ALL_OBJECTS = $(COMMON_OBJECTS) # applications are expected to override this
ALL_SOURCES = $(COMMON_SOURCES) # applications are expected to override this
#
# all applications must link to the following objects
# (or an equivalent)
COMMON_OBJECTS = $(OBJECTS_EXPECTED) $(LIB1D_OBJECTS)
COMMON_SOURCES = $(SOURCES_EXPECTED) $(LIB1D_SOURCES)

# default locations for expected application files
#
#
# (If you want to be able to vary a particular name,
# please do so by making definitions such as the following
# and then overriding it in the application Makefile)
AuxFunc         = AuxFunc
QinitFunc       = QinitFunc
FluxFunc        = FluxFunc
SourceTermFunc  = SourceTermFunc
SetWaveSpd      = SetWaveSpd
SetBndValues    = SetBndValues
ProjectLeftEig  = ProjectLeftEig
ProjectRightEig = ProjectRightEig

OBJECTS_EXPECTED = \
  main.o \
  $(AuxFunc).o \
  $(QinitFunc).o \
  $(FluxFunc).o \
  $(SourceTermFunc).o \
  $(SetWaveSpd).o \
  $(SetBndValues).o \
  $(ProjectLeftEig).o \
  $(ProjectRightEig).o \

SOURCES_EXPECTED = \
  main.cpp \
  $(AuxFunc).cpp \
  $(QinitFunc).cpp \
  $(FluxFunc).cpp \
  $(SourceTermFunc).cpp \
  $(SetWaveSpd).cpp \
  $(SetBndValues).cpp \
  $(ProjectLeftEig).cpp \
  $(ProjectRightEig).cpp \

# default library files that applications are likely to override
#
# (either with local or alternative library object modules)
#
# (Please expand this list as needed rather than overriding
# LIB1D_OBJECTS in application Makefiles so that we can add
# new object modules to the library without breaking existing
# application Makefiles. Of course we could just define variables
# for all the object modules in the library, but by doing it this
# way we keep track of which object modules are currently being
# overridden by some application)
#
RunFinpack           = $(LIB1D)/RunFinpack
Output               = $(LIB1D)/Output
Output_Extra         = $(LIB1D)/Output_Extra
ConSoln              = $(LIB1D)/ConSoln
AfterQinit           = $(LIB1D)/AfterQinit
AfterStep            = $(LIB1D)/AfterStep
BeforeStep           = $(LIB1D)/BeforeStep
AfterUpdateSoln      = $(LIB1D)/AfterUpdateSoln
ApplyLimiter         = $(LIB1D)/ApplyLimiter
ApplyPosLimiter      = $(LIB1D)/ApplyPosLimiter
RiemannSolve         = $(LIB1D)/RiemannSolveLLF
ConstructL           = $(LIB1D)/ConstructL
InitApp              = $(LIB1D)/InitApp
BeforeFullTimeStep   = $(LIB1D)/BeforeFullTimeStep
AfterFullTimeStep    = $(LIB1D)/AfterFullTimeStep
DogSolveUser         = $(LIB1D)/DogSolveUser
GridSetup            = $(LIB1D)/GridSetup
SampleFunction       = $(LIB1D)/SampleFunction

# Routines needed for Lax-Wendroff (and multiderivative) time stepping:
DFluxFunc            = $(LIB1D)/LaxWendroff/DFluxFunc
D2FluxFunc           = $(LIB1D)/LaxWendroff/D2FluxFunc

# TODO - these should be added in at a later time (-DS)
FinSolveLxW           = $(LIB1D)/FinSolveLxW
ConstructIntegratedL  = $(LIB1D)/ConstructIntegratedL
#LaxWendroff          = $(LIB1D)/LaxWendroff/LaxWendroff
#LaxWendroffTD        = $(LIB1D)/LaxWendroff/LaxWendroffTD
#RiemannSolveLxW      = $(LIB1D)/LaxWendroff/RiemannSolveLxW_LLF

LIB1D_OBJECTS = \
  $(TOPLIB_OBJECTS) \
  $(LIB1D)/main_global.o \
  $(RunFinpack).o \
  $(LIB1D)/DogParamsCart1.o \
  $(GridSetup).o \
  $(SampleFunction).o \
  $(Output).o \
  $(Output_Extra).o \
  $(ConSoln).o \
  $(LIB1D)/FinSolveRK.o \
  $(FinSolveLxW).o \
  $(DogSolveUser).o \
  $(DFluxFunc).o \
  $(D2FluxFunc).o \
  $(ConstructIntegratedL).o \
  $(LIB1D)/CopyQ.o \
  $(AfterQinit).o \
  $(BeforeStep).o \
  $(AfterStep).o \
  $(BeforeFullTimeStep).o \
  $(AfterFullTimeStep).o \
  $(InitApp).o \
  $(AfterUpdateSoln).o \
  $(ApplyLimiter).o \
  $(ApplyPosLimiter).o \
  $(LIB1D)/ConvertQtoW.o \
  $(LIB1D)/ConvertWtoQ.o \
  $(ConstructL).o \
  $(LIB1D)/UpdateSoln.o \
  $(LIB1D)/ResInt.o \
  $(LIB1D)/GetCFL.o \
  $(RiemannSolve).o \
  $(LIB1D)/SetRKinfo.o \

LIB1D_SOURCES = \
  $(LIB1D)/*.h \
  $(TOPLIB_SOURCES) \
  $(LIB1D)/main_global.cpp \
  $(RunFinpack).cpp \
  $(LIB1D)/DogParamsCart1.cpp \
  $(GridSetup).cpp \
  $(SampleFunction).cpp \
  $(Output).cpp \
  $(Output_Extra).cpp \
  $(ConSoln).cpp \
  $(LIB1D)/FinSolveRK.cpp \
  $(FinSolveLxW).cpp \
  $(DogSolveUser).cpp \
  $(DFluxFunc).cpp \
  $(D2FluxFunc).cpp \
  $(ConstructIntegratedL).cpp \
  $(LIB1D)/CopyQ.cpp \
  $(AfterQinit).cpp \
  $(BeforeStep).cpp \
  $(AfterStep).cpp \
  $(BeforeFullTimeStep).cpp \
  $(AfterFullTimeStep).cpp \
  $(InitApp).cpp \
  $(AfterUpdateSoln).cpp \
  $(ApplyLimiter).cpp \
  $(ApplyPosLimiter).cpp \
  $(LIB1D)/ConvertQtoW.cpp \
  $(LIB1D)/ConvertWtoQ.cpp \
  $(ConstructL).cpp \
  $(LIB1D)/UpdateSoln.cpp \
  $(LIB1D)/ResInt.cpp \
  $(LIB1D)/GetCFL.cpp \
  $(RiemannSolve).cpp \
  $(LIB1D)/SetRKinfo.cpp \

